<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="–ö–æ—Ç–µ–ª–æ–∫ –í–∞—Ä–∏—Ç - –Ω–∞—Ö–æ–¥–∏—Ç–µ —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ —Ñ–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤">
  <meta name="theme-color" content="#EA580C">
  <title>–ö–æ—Ç–µ–ª–æ–∫ –í–∞—Ä–∏—Ç</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    body {
      overscroll-behavior: none;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React and Babel -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script type="text/babel">
    const { useState } = React;

    // Icon components from Lucide
    const Camera = () => <i data-lucide="camera"></i>;
    const Upload = () => <i data-lucide="upload"></i>;
    const X = () => <i data-lucide="x"></i>;
    const ChefHat = () => <i data-lucide="chef-hat"></i>;
    const Loader2 = () => <i data-lucide="loader-2"></i>;
    const Plus = () => <i data-lucide="plus"></i>;
    const Trash2 = () => <i data-lucide="trash-2"></i>;

    function App() {
      const [image, setImage] = useState(null);
      const [ingredients, setIngredients] = useState([]);
      const [recipes, setRecipes] = useState([]);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');
      const [step, setStep] = useState('upload');

      React.useEffect(() => {
        lucide.createIcons();
      });

      const handleImageUpload = (e) => {
        const file = e.target.files?.[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            setImage(reader.result);
            analyzeImage(reader.result);
          };
          reader.readAsDataURL(file);
        }
      };

      const analyzeImage = async (imageData) => {
        setLoading(true);
        setError('');
        
        try {
          await new Promise(resolve => setTimeout(resolve, 2000));
          
          const possibleIngredients = [
            '–ü–æ–º–∏–¥–æ—Ä—ã', '–û–≥—É—Ä—Ü—ã', '–ö—É—Ä–∏—Ü–∞', '–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å', '–õ—É–∫',
            '–ú–æ—Ä–∫–æ–≤—å', '–Ø–π—Ü–∞', '–ú–æ–ª–æ–∫–æ', '–°—ã—Ä', '–ú–∞—Å–ª–æ',
            '–ß–µ—Å–Ω–æ–∫', '–ü–µ—Ä–µ—Ü', '–†–∏—Å', '–ú–∞–∫–∞—Ä–æ–Ω—ã', '–ú—É–∫–∞',
            '–ö–∞–ø—É—Å—Ç–∞', '–°–≤—ë–∫–ª–∞', '–ë–∞–∫–ª–∞–∂–∞–Ω', '–ö–∞–±–∞—á–æ–∫', '–ì—Ä–∏–±—ã'
          ];
          
          const detected = possibleIngredients
            .sort(() => Math.random() - 0.5)
            .slice(0, Math.floor(Math.random() * 5) + 3);
          
          setIngredients(detected.map((ing, idx) => ({ id: idx, name: ing })));
          setStep('ingredients');
        } catch (err) {
          setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
        } finally {
          setLoading(false);
        }
      };

      const addIngredient = () => {
        const newIngredient = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞:');
        if (newIngredient && newIngredient.trim()) {
          setIngredients([...ingredients, { 
            id: Date.now(), 
            name: newIngredient.trim() 
          }]);
        }
      };

      const removeIngredient = (id) => {
        setIngredients(ingredients.filter(ing => ing.id !== id));
      };

      const findRecipes = async () => {
        setLoading(true);
        setError('');
        
        try {
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          const demoRecipes = [
            {
              id: 1,
              title: '–û–≤–æ—â–Ω–æ–π —Å–∞–ª–∞—Ç "–°–≤–µ–∂–µ—Å—Ç—å"',
              time: '15 –º–∏–Ω—É—Ç',
              difficulty: '–õ–µ–≥–∫–æ',
              ingredients: ingredients.slice(0, 4).map(i => i.name),
              description: '–°–≤–µ–∂–∏–π –∏ –ø–æ–ª–µ–∑–Ω—ã–π —Å–∞–ª–∞—Ç –∏–∑ —Å–µ–∑–æ–Ω–Ω—ã—Ö –æ–≤–æ—â–µ–π. –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –ª—ë–≥–∫–æ–≥–æ —É–∂–∏–Ω–∞ –∏–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≥–∞—Ä–Ω–∏—Ä–∞.'
            },
            {
              id: 2,
              title: '–î–æ–º–∞—à–Ω–∏–π —Å—É–ø —Å –æ–≤–æ—â–∞–º–∏',
              time: '45 –º–∏–Ω—É—Ç',
              difficulty: '–°—Ä–µ–¥–Ω–µ',
              ingredients: ingredients.slice(0, 5).map(i => i.name),
              description: '–ù–∞–≤–∞—Ä–∏—Å—Ç—ã–π –¥–æ–º–∞—à–Ω–∏–π —Å—É–ø —Å –æ–≤–æ—â–∞–º–∏. –°–æ–≥—Ä–µ–µ—Ç –≤ —Ö–æ–ª–æ–¥–Ω—ã–π –¥–µ–Ω—å –∏ –Ω–∞—Å—ã—Ç–∏—Ç –≤—Å—é —Å–µ–º—å—é.'
            },
            {
              id: 3,
              title: '–ó–∞–ø–µ—á—ë–Ω–Ω—ã–µ –æ–≤–æ—â–∏ –≤ –¥—É—Ö–æ–≤–∫–µ',
              time: '30 –º–∏–Ω—É—Ç',
              difficulty: '–õ–µ–≥–∫–æ',
              ingredients: ingredients.slice(0, 3).map(i => i.name),
              description: '–ê—Ä–æ–º–∞—Ç–Ω—ã–µ –æ–≤–æ—â–∏, –∑–∞–ø–µ—á—ë–Ω–Ω—ã–µ –≤ –¥—É—Ö–æ–≤–∫–µ —Å —Ç—Ä–∞–≤–∞–º–∏. –ü–æ–ª–µ–∑–Ω–æ –∏ –≤–∫—É—Å–Ω–æ!'
            },
            {
              id: 4,
              title: '–û–≤–æ—â–Ω–æ–µ —Ä–∞–≥—É',
              time: '40 –º–∏–Ω—É—Ç',
              difficulty: '–°—Ä–µ–¥–Ω–µ',
              ingredients: ingredients.slice(0, 6).map(i => i.name),
              description: '–°—ã—Ç–Ω–æ–µ —Ä–∞–≥—É –∏–∑ –æ–≤–æ—â–µ–π. –ú–æ–∂–Ω–æ –ø–æ–¥–∞–≤–∞—Ç—å –∫–∞–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ –±–ª—é–¥–æ –∏–ª–∏ —Å –≥–∞—Ä–Ω–∏—Ä–æ–º.'
            }
          ];
          
          setRecipes(demoRecipes);
          setStep('recipes');
        } catch (err) {
          setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤');
        } finally {
          setLoading(false);
        }
      };

      const reset = () => {
        setImage(null);
        setIngredients([]);
        setRecipes([]);
        setStep('upload');
        setError('');
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-4">
          <div className="max-w-4xl mx-auto">
            <div className="text-center mb-8 pt-6">
              <div className="flex items-center justify-center gap-3 mb-2">
                <div className="w-12 h-12 text-orange-600">
                  <ChefHat />
                </div>
                <h1 className="text-4xl font-bold text-gray-800">–ö–æ—Ç–µ–ª–æ–∫ –í–∞—Ä–∏—Ç</h1>
              </div>
              <p className="text-gray-600">–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ—Ü–µ–ø—Ç—ã</p>
              <p className="text-sm text-orange-600 mt-2">üí° –£–º–Ω–∞—è –≥–æ—Ç–æ–≤–∫–∞: –∫–æ—Ç–µ–ª–æ–∫ –≤–∞—Ä–∏—Ç, –≥–æ–ª–æ–≤–∞ —Å–æ–æ–±—Ä–∞–∂–∞–µ—Ç!</p>
            </div>

            {step === 'upload' && (
              <div className="bg-white rounded-2xl shadow-lg p-8">
                {!image ? (
                  <div className="space-y-4">
                    <label className="block cursor-pointer">
                      <div className="border-3 border-dashed border-orange-300 rounded-xl p-12 text-center hover:border-orange-500 hover:bg-orange-50 transition-all">
                        <div className="w-16 h-16 mx-auto text-orange-400 mb-4">
                          <Camera />
                        </div>
                        <p className="text-lg font-medium text-gray-700 mb-2">–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã</p>
                        <p className="text-sm text-gray-500">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å—ä—ë–º–∫–∏ –∏–ª–∏ –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ç–æ</p>
                      </div>
                      <input
                        type="file"
                        accept="image/*"
                        capture="environment"
                        onChange={handleImageUpload}
                        className="hidden"
                      />
                    </label>

                    <label className="block cursor-pointer">
                      <div className="border-3 border-dashed border-amber-300 rounded-xl p-12 text-center hover:border-amber-500 hover:bg-amber-50 transition-all">
                        <div className="w-16 h-16 mx-auto text-amber-400 mb-4">
                          <Upload />
                        </div>
                        <p className="text-lg font-medium text-gray-700 mb-2">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏</p>
                        <p className="text-sm text-gray-500">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</p>
                      </div>
                      <input
                        type="file"
                        accept="image/*"
                        onChange={handleImageUpload}
                        className="hidden"
                      />
                    </label>

                    <div className="mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                      <p className="text-sm text-blue-800">
                        <strong>üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong> –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ‚Üí –ö–æ—Ç–µ–ª–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã ‚Üí –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ—Ü–µ–ø—Ç—ã!
                      </p>
                    </div>
                  </div>
                ) : (
                  <div className="space-y-4">
                    <div className="relative">
                      <img src={image} alt="–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ" className="w-full rounded-xl shadow-md" />
                      <button
                        onClick={reset}
                        className="absolute top-4 right-4 bg-red-500 text-white p-3 rounded-full hover:bg-red-600 shadow-lg transition-colors"
                      >
                        <div className="w-6 h-6">
                          <X />
                        </div>
                      </button>
                    </div>
                    {loading && (
                      <div className="text-center py-8">
                        <div className="w-12 h-12 mx-auto text-orange-500 animate-spin mb-4">
                          <Loader2 />
                        </div>
                        <p className="text-gray-600 font-medium">–ö–æ—Ç–µ–ª–æ–∫ –≤–∞—Ä–∏—Ç... –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ–¥—É–∫—Ç—ã!</p>
                      </div>
                    )}
                  </div>
                )}
              </div>
            )}

            {step === 'ingredients' && (
              <div className="bg-white rounded-2xl shadow-lg p-8">
                <h2 className="text-2xl font-bold text-gray-800 mb-2">–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</h2>
                <p className="text-gray-600 mb-6">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ</p>
                
                <div className="space-y-3 mb-6">
                  {ingredients.map(ing => (
                    <div key={ing.id} className="flex items-center justify-between bg-orange-50 p-4 rounded-lg hover:bg-orange-100 transition-colors">
                      <span className="text-lg text-gray-700">{ing.name}</span>
                      <button
                        onClick={() => removeIngredient(ing.id)}
                        className="text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-colors"
                      >
                        <div className="w-5 h-5">
                          <Trash2 />
                        </div>
                      </button>
                    </div>
                  ))}
                </div>

                <div className="flex gap-3 mb-4">
                  <button
                    onClick={addIngredient}
                    className="flex-1 bg-amber-100 text-amber-700 py-3 px-6 rounded-lg font-medium hover:bg-amber-200 transition-colors flex items-center justify-center gap-2"
                  >
                    <div className="w-5 h-5">
                      <Plus />
                    </div>
                    –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç
                  </button>
                  <button
                    onClick={findRecipes}
                    disabled={ingredients.length === 0 || loading}
                    className="flex-1 bg-orange-500 text-white py-3 px-6 rounded-lg font-medium hover:bg-orange-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-md"
                  >
                    {loading ? (
                      <>
                        <div className="w-5 h-5 animate-spin">
                          <Loader2 />
                        </div>
                        –ò—â–µ–º —Ä–µ—Ü–µ–ø—Ç—ã...
                      </>
                    ) : (
                      <>
                        <div className="w-5 h-5">
                          <ChefHat />
                        </div>
                        –í–∞—Ä–∏–º —Ä–µ—Ü–µ–ø—Ç—ã!
                      </>
                    )}
                  </button>
                </div>

                <button
                  onClick={reset}
                  className="w-full text-gray-500 hover:text-gray-700 py-2 text-sm"
                >
                  ‚Üê –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
                </button>
              </div>
            )}

            {step === 'recipes' && (
              <div className="space-y-4">
                <div className="bg-white rounded-2xl shadow-lg p-6">
                  <h2 className="text-2xl font-bold text-gray-800 mb-2">üç≤ –ö–æ—Ç–µ–ª–æ–∫ –Ω–∞–≤–∞—Ä–∏–ª!</h2>
                  <p className="text-gray-600 mb-4">–ù–∞–π–¥–µ–Ω–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤: <strong>{recipes.length}</strong></p>
                  <button
                    onClick={reset}
                    className="text-orange-600 hover:text-orange-700 font-medium hover:underline"
                  >
                    ‚Üê –ü—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ
                  </button>
                </div>

                {recipes.map(recipe => (
                  <div key={recipe.id} className="bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow">
                    <h3 className="text-xl font-bold text-gray-800 mb-3">{recipe.title}</h3>
                    <div className="flex gap-4 text-sm text-gray-600 mb-3">
                      <span>‚è±Ô∏è {recipe.time}</span>
                      <span>üìä {recipe.difficulty}</span>
                      <span>üçΩÔ∏è {recipe.ingredients.length} –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤</span>
                    </div>
                    <p className="text-gray-700 mb-4 leading-relaxed">{recipe.description}</p>
                    <div className="border-t pt-4">
                      <p className="text-sm font-medium text-gray-700 mb-2">–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã:</p>
                      <div className="flex flex-wrap gap-2">
                        {recipe.ingredients.map((ing, idx) => (
                          <span key={idx} className="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm font-medium">
                            {ing}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                ))}

                <div className="bg-gradient-to-r from-orange-100 to-amber-100 rounded-2xl p-6 text-center">
                  <p className="text-gray-700 mb-2">üí° <strong>–°–æ–≤–µ—Ç:</strong> –≠—Ç–æ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
                  <p className="text-sm text-gray-600">–í –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –±—É–¥–µ—Ç –Ω–∞—Å—Ç–æ—è—â–µ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —Ç—ã—Å—è—á–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤!</p>
                </div>
              </div>
            )}

            {error && (
              <div className="mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg">
                ‚ö†Ô∏è {error}
              </div>
            )}

            <footer className="text-center mt-8 pb-6">
              <p className="text-gray-500 text-sm">
                –ö–æ—Ç–µ–ª–æ–∫ –í–∞—Ä–∏—Ç ¬© 2024 | PWA-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
              </p>
            </footer>
          </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));

    // Initialize Lucide icons after render
    setTimeout(() => {
      lucide.createIcons();
    }, 100);

    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(reg => console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
          .catch(err => console.log('–û—à–∏–±–∫–∞ Service Worker:', err));
      });
    }
  </script>
</body>
</html>
